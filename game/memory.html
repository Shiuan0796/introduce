<!DOCTYPE html>
<html lang="zh-Hant">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>æ­¡è¿ä¾†åˆ°éŠæˆ²å°ˆå€</title>
  <div class="abc-style">
    <link rel="stylesheet" href="../css/abc.css">
  </div>
  <!-- å¼•å…¥é é¢å…§å®¹å°ˆç”¨æ¨£å¼ -->
  <link rel="stylesheet" href="../css/simple.css">
  <!-- å¼•å…¥æˆ‘å€‘æ–°å¢çš„æ¨£å¼ -->
  <link rel="stylesheet" href="../css/style.css">
  <!-- ä¿ç•™ä½ åŸæœ¬çš„å¤–éƒ¨ CSS -->
  <style>
 .game-container {
      max-width: 800px;
      margin: 20px auto;
      text-align: center;
      padding-bottom: 30px; /* å¢åŠ åº•éƒ¨é–“è·ï¼Œç¢ºä¿èˆ‡æ§åˆ¶æŒ‰éˆ•ä¸é‡ç–Š */
    }

    canvas {
      border: 5px solid #FF9999;
      border-radius: 10px;
      background-color: #FFF5F5;
      margin-top: 20px;
      margin-bottom: 30px; /* å¢åŠ åº•éƒ¨é–“è·ï¼Œç¢ºä¿èˆ‡æ§åˆ¶æŒ‰éˆ•ä¸é‡ç–Š */
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
      image-rendering: pixelated;
      image-rendering: crisp-edges;
    }

    .game-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 15px;
    }

    .score-display {
      background-color: #FFD4D4;
      padding: 8px 16px;
      border-radius: 20px;
      font-weight: bold;
      font-size: 18px;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }

    .controls {
      margin-top: 40px; /* å¢åŠ é ‚éƒ¨é–“è·ï¼Œç¢ºä¿èˆ‡canvasä¸é‡ç–Š */
      display: flex;
      justify-content: space-around;
      max-width: 400px;
      margin-left: auto;
      margin-right: auto;
    }

    button {
      background-color: #FF9999;
      border: none;
      color: white;
      padding: 8px 16px;
      border-radius: 20px;
      cursor: pointer;
      font-weight: bold;
      transition: background-color 0.3s;
      margin: 0 5px;
      min-width: 100px;
    }

    button:hover {
      background-color: #FF7777;
    }
    
    button:focus {
      outline: none;
      box-shadow: 0 0 0 2px #FF5555;
    }

    @media (max-width: 500px) {
      .controls {
        flex-direction: column;
        align-items: center;
        gap: 10px;
      }
      
      button {
        width: 80%;
        margin: 5px 0;
      }
    }

    .game-over {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background-color: rgba(255, 255, 255, 0.9);
      padding: 20px;
      border-radius: 10px;
      text-align: center;
      display: none;
      z-index: 10;
      box-shadow: 0 0 15px rgba(0, 0, 0, 0.2);
      border: 3px solid #FF9999;
      width: 200px;
    }

    .canvas-container {
      position: relative;
      width: 400px;
      height: 440px; /* å¢åŠ é«˜åº¦ä»¥ç¢ºä¿éŠæˆ²çµæŸè¦–çª—ä¸æœƒè¶…å‡º */
      margin: 20px auto;
    }

    .game-over h2 {
      color: #FF5555;
      margin-bottom: 15px;
    }

    .mobile-controls {
      display: none;
      justify-content: center;
      margin-top: 40px; /* å¢åŠ é ‚éƒ¨é–“è· */
    }

    .mobile-controls div {
      display: grid;
      grid-template-areas:
        ". up ."
        "left . right"
        ". down .";
      gap: 10px;
    }

    .control-btn {
      width: 60px;
      height: 60px;
      border-radius: 50%;
      background-color: #FFB6C1;
      display: flex;
      justify-content: center;
      align-items: center;
      font-size: 24px;
      cursor: pointer;
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
    }

    .up-btn { grid-area: up; }
    .left-btn { grid-area: left; }
    .right-btn { grid-area: right; }
    .down-btn { grid-area: down; }

    @media (max-width: 768px) {
      .mobile-controls {
        display: flex;
      }
      canvas {
        max-width: 100%;
      }
    }

    h1 {
      color: #FF6B88;
      font-size: 28px;
      margin-bottom: 5px;
      text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.1);
    }

    .game-info {
      color: #888;
      margin-bottom: 20px;
    }
     /* è¼ƒå°çš„è¿”å›æŒ‰éˆ•æ¨£å¼ */
     .back-link {
      display: inline-block;
      padding: 4px 12px;
      /* æ¸›å°å…§é‚Šè· */
      border: 1px solid #0052cc;
      /* ä½¿ç”¨è¼ƒç´°çš„é‚Šæ¡†å’Œè—è‰² */
      border-radius: 4px;
      /* æ¸›å°é‚Šæ¡†åœ“è§’ */
      text-decoration: none;
      color: white;
      font-weight: normal;
      /* èª¿æ•´å­—é«”ç²—ç´° */
      font-size: 14px;
      /* æ¸›å°å­—é«”å¤§å° */
      background-color: #0066cc;
      /* ä½¿ç”¨è—è‰²èƒŒæ™¯ */
      text-align: center;
      line-height: 1.5;
      transition: background-color 0.3s ease;
      width: fit-content;
      /* è®“æŒ‰éˆ•å¯¬åº¦é©æ‡‰å…§å®¹ */
    }

    .back-link:hover {
      background-color: #004c99;
      /* æ‡¸åœæ™‚çš„é¡è‰²è®ŠåŒ– */
    }

    .arrow {
      font-weight: 900;
      margin-right: 4px;
    }

    .game-container {
      border: 2px solid #ccc;
      /* æ·ºç°è‰²é‚Šæ¡† */
      border-radius: 12px;
      padding: 20px;
      max-width: 500px;
      margin: 0 auto 30px;
      background-color: #fdfdfd;
      /* éç²‰è‰²ï¼Œç•¥å¾®æŸ”å’ŒèƒŒæ™¯ */
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.05);
    }

    .align-left-container {
  width: 500px; /* è·Ÿ .game-container ä¸€æ¨£å¯¬ */
  margin: 0 auto; /* è®“å®ƒåœ¨é é¢ä¸­ç½®ä¸­ï¼Œä½†å…§å®¹é å·¦ */
  text-align: left;
}

  </style>
</head>

<body>
  <header>
    <nav>
      <a href="../index.html">ç°¡æ­·</a>
      <a href="../story.html">æ•…äº‹</a>
      <a href="../blog/index.html">æŠ€èƒ½å°ˆå€</a>
      <a href="../resume.html">å­¸ç¿’æ­·ç¨‹</a>
      <a href="game.html" aria-current="page">Fun!</a>
    </nav>
  </header>
  <div class="game-container">
    <h1>ğŸ° ç”œé»è²ªåƒè›‡ ğŸ©</h1>
    <div class="game-header">
      <div class="score-display">åˆ†æ•¸: <span id="score">0</span></div>
      <div class="score-display">æœ€é«˜åˆ†: <span id="highscore">0</span></div>
    </div>

    <div class="canvas-container">
      <canvas id="gameCanvas" width="400" height="400"></canvas>
      <div id="gameOver" class="game-over">
        <h2>éŠæˆ²çµæŸ</h2>
        <p>ä½ çš„åˆ†æ•¸: <span id="finalScore">0</span></p>
        <button id="restartBtn">å†ä¾†ä¸€æ¬¡</button>
      </div>
    </div>

    <div class="controls">
      <button id="startBtn">é–‹å§‹éŠæˆ²</button>
      <button id="pauseBtn">æš«åœ</button>
      <button id="resetBtn">é‡æ–°é–‹å§‹</button>
    </div>

    <div class="mobile-controls">
      <div>
        <div class="control-btn up-btn">â¬†ï¸</div>
        <div class="control-btn left-btn">â¬…ï¸</div>
        <div class="control-btn right-btn">â¡ï¸</div>
        <div class="control-btn down-btn">â¬‡ï¸</div>
      </div>
    </div>
  </div>
  
  
  
  <div style="text-align: center; margin-bottom: 30px;">
    <blockquote style="display: inline-block; text-align: left; max-width: 500px;">
      "ã€Œæ”¶é›†ç¾å‘³çš„ç”œé»ï¼Œä½†å°å¿ƒä¸è¦æ’åˆ°è‡ªå·±ï¼ã€"ğŸâš¡
      <br>
      <cite>â€” æˆ‘ï¼Œå°ç”œé»çš„ç†±æ„›</cite>
    </blockquote>
    <br>
    <div class="align-left-container">
      <a href="game.html" class="button back-link"><span class="arrow">â¬…</span> å›åˆ°ä¸Šä¸€é  ãƒ¾(ï¿£â–½ï¿£) Bye~</a>
    </div>

  </div>

  <footer>
    <p>æ¯å€‹é—œå¡ã€æ¯å€‹ç•«é¢ï¼Œéƒ½æ˜¯æˆ‘å­¸ç¿’èˆ‡æŒ‘æˆ°çš„æˆæœã€‚</p>
  </footer>



  <script>
    document.addEventListener('DOMContentLoaded', () => {
      // éŠæˆ²ç•«å¸ƒè¨­ç½®
      const canvas = document.getElementById('gameCanvas');
      const ctx = canvas.getContext('2d');
      
      // éŠæˆ²åƒæ•¸
      const gridSize = 20;
      const gridWidth = canvas.width / gridSize;
      const gridHeight = canvas.height / gridSize;
      
      // æŒ‰éˆ•å’Œé¡¯ç¤ºå…ƒç´ 
      const startBtn = document.getElementById('startBtn');
      const pauseBtn = document.getElementById('pauseBtn');
      const resetBtn = document.getElementById('resetBtn');
      const restartBtn = document.getElementById('restartBtn');
      const scoreDisplay = document.getElementById('score');
      const highscoreDisplay = document.getElementById('highscore');
      const finalScoreDisplay = document.getElementById('finalScore');
      const gameOverScreen = document.getElementById('gameOver');
      
      // ç§»å‹•æ§åˆ¶æŒ‰éˆ•
      const upBtn = document.querySelector('.up-btn');
      const leftBtn = document.querySelector('.left-btn');
      const rightBtn = document.querySelector('.right-btn');
      const downBtn = document.querySelector('.down-btn');
      
      // ç”œé»åœ–æ¡ˆ
      const desserts = ['ğŸ°', 'ğŸª', 'ğŸ©', 'ğŸ¦', 'ğŸ­', 'ğŸ«', 'ğŸ§', 'ğŸ®', 'ğŸ¨'];
      
      // éŠæˆ²ç‹€æ…‹
      let snake = [];
      let food = {};
      let direction = 'right';
      let nextDirection = 'right';
      let gameSpeed = 150; // æ¯«ç§’
      let score = 0;
      let highScore = localStorage.getItem('snakeHighScore') || 0;
      let gameRunning = false;
      let gamePaused = false;
      let gameLoop;
      let currentDessert = '';
      
      // é¡¯ç¤ºé«˜åˆ†
      highscoreDisplay.textContent = highScore;
      
      // åˆå§‹åŒ–éŠæˆ²
      function initGame() {
        // é‡ç½®è›‡ - è®“è›‡èµ·å§‹ä½ç½®æ›´é è¿‘ç•«å¸ƒä¸­å¤®
        snake = [
          {x: Math.floor(gridWidth/2), y: Math.floor(gridHeight/2)},
          {x: Math.floor(gridWidth/2)-1, y: Math.floor(gridHeight/2)},
          {x: Math.floor(gridWidth/2)-2, y: Math.floor(gridHeight/2)}
        ];
        
        // é‡ç½®æ–¹å‘
        direction = 'right';
        nextDirection = 'right';
        
        // é‡ç½®åˆ†æ•¸
        score = 0;
        scoreDisplay.textContent = score;
        
        // ç”Ÿæˆé£Ÿç‰©
        generateFood();
        
        // éš±è—éŠæˆ²çµæŸç•«é¢
        gameOverScreen.style.display = 'none';
        
        // ç¹ªè£½åˆå§‹ç‹€æ…‹
        draw();
      }
      
      // ç”Ÿæˆé£Ÿç‰©
      function generateFood() {
        // ç¢ºä¿é£Ÿç‰©ä¸æœƒå‡ºç¾åœ¨è›‡çš„èº«é«”ä¸Šä¸”æ›´å¯èƒ½å‡ºç¾åœ¨ç•«å¸ƒçš„ä¸­å¤®å€åŸŸ
        let validPosition = false;
        while (!validPosition) {
          // å¢åŠ é£Ÿç‰©å‡ºç¾åœ¨ä¸­å¤®å€åŸŸçš„æ©Ÿç‡
          let centerBias = Math.random() < 0.7;
          
          if (centerBias) {
            // 70% çš„æ©Ÿç‡åœ¨ä¸­å¤®å€åŸŸç”Ÿæˆé£Ÿç‰©
            const centerStart = Math.floor(gridWidth * 0.25);
            const centerEnd = Math.floor(gridWidth * 0.75);
            
            food = {
              x: Math.floor(Math.random() * (centerEnd - centerStart)) + centerStart,
              y: Math.floor(Math.random() * (centerEnd - centerStart)) + centerStart
            };
          } else {
            // 30% çš„æ©Ÿç‡åœ¨æ•´å€‹ç•«å¸ƒç”Ÿæˆé£Ÿç‰©
            food = {
              x: Math.floor(Math.random() * gridWidth),
              y: Math.floor(Math.random() * gridHeight)
            };
          }
          
          validPosition = true;
          for (let part of snake) {
            if (part.x === food.x && part.y === food.y) {
              validPosition = false;
              break;
            }
          }
        }
        
        // éš¨æ©Ÿé¸æ“‡ç”œé»
        currentDessert = desserts[Math.floor(Math.random() * desserts.length)];
      }
      
      // éŠæˆ²ä¸»å¾ªç’°
      function gameStep() {
        if (!gameRunning || gamePaused) return;
        
        // æ›´æ–°è›‡çš„æ–¹å‘
        direction = nextDirection;
        
        // ç²å–è›‡é ­ä½ç½®
        const head = {x: snake[0].x, y: snake[0].y};
        
        // æ ¹æ“šæ–¹å‘ç§»å‹•è›‡é ­
        switch (direction) {
          case 'up': head.y--; break;
          case 'down': head.y++; break;
          case 'left': head.x--; break;
          case 'right': head.x++; break;
        }
        
        // æª¢æŸ¥æ˜¯å¦æ’ç‰†
        if (head.x < 0 || head.x >= gridWidth || head.y < 0 || head.y >= gridHeight) {
          gameOver();
          return;
        }
        
        // æª¢æŸ¥æ˜¯å¦æ’åˆ°è‡ªå·±
        for (let i = 0; i < snake.length; i++) {
          if (snake[i].x === head.x && snake[i].y === head.y) {
            gameOver();
            return;
          }
        }
        
        // å°‡æ–°é ­éƒ¨æ·»åŠ åˆ°è›‡æ•¸çµ„
        snake.unshift(head);
        
        // æª¢æŸ¥æ˜¯å¦åƒåˆ°é£Ÿç‰©
        if (head.x === food.x && head.y === food.y) {
          // å¢åŠ åˆ†æ•¸
          score += 10;
          scoreDisplay.textContent = score;
          
          // æ›´æ–°é«˜åˆ†
          if (score > highScore) {
            highScore = score;
            highscoreDisplay.textContent = highScore;
            localStorage.setItem('snakeHighScore', highScore);
          }
          
          // åŠ é€Ÿï¼ˆä½†ä¸è¦å¤ªå¿«ï¼‰
          if (gameSpeed > 70) {
            gameSpeed -= 2;
            clearInterval(gameLoop);
            gameLoop = setInterval(gameStep, gameSpeed);
          }
          
          // ç”Ÿæˆæ–°é£Ÿç‰©
          generateFood();
        } else {
          // å¦‚æœæ²’åƒåˆ°é£Ÿç‰©ï¼Œç§»é™¤è›‡å°¾
          snake.pop();
        }
        
        // é‡ç¹ªéŠæˆ²
        draw();
      }
      
      // ç¹ªè£½éŠæˆ²
      function draw() {
        // æ¸…ç©ºç•«å¸ƒ
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        
        // ç¹ªè£½ç¶²æ ¼
        ctx.strokeStyle = '#FFD4D4';
        ctx.lineWidth = 1;
        
        // ç¹ªè£½å‚ç›´ç·š
        for (let x = 0; x <= canvas.width; x += gridSize) {
          ctx.beginPath();
          ctx.moveTo(x, 0);
          ctx.lineTo(x, canvas.height);
          ctx.stroke();
        }
        
        // ç¹ªè£½æ°´å¹³ç·š
        for (let y = 0; y <= canvas.height; y += gridSize) {
          ctx.beginPath();
          ctx.moveTo(0, y);
          ctx.lineTo(canvas.width, y);
          ctx.stroke();
        }
        
        // ç¹ªè£½è›‡
        for (let i = 0; i < snake.length; i++) {
          // è›‡é ­å’Œèº«é«”ä½¿ç”¨ä¸åŒé¡è‰²
          if (i === 0) {
            ctx.fillStyle = '#FF4477';
          } else {
            // æ¼¸è®Šé¡è‰² - å¾ç²‰ç´…åˆ°æ·ºç²‰
            const colorValue = 200 - (i * 5) % 50;
            ctx.fillStyle = `rgb(255, ${colorValue}, ${colorValue + 30})`;
          }
          
          ctx.fillRect(snake[i].x * gridSize, snake[i].y * gridSize, gridSize, gridSize);
          
          // æ·»åŠ é‚Šæ¡†
          ctx.strokeStyle = '#FFF';
          ctx.lineWidth = 2;
          ctx.strokeRect(snake[i].x * gridSize, snake[i].y * gridSize, gridSize, gridSize);
          ctx.lineWidth = 1;
          
          // ç‚ºè›‡é ­æ·»åŠ çœ¼ç›
          if (i === 0) {
            ctx.fillStyle = '#FFF';
            const eyeSize = gridSize / 5;
            
            // æ ¹æ“šæ–¹å‘ç¹ªè£½çœ¼ç›
            if (direction === 'right' || direction === 'left') {
              const eyeY = snake[i].y * gridSize + gridSize / 3;
              
              // å·¦çœ¼
              ctx.beginPath();
              ctx.arc(snake[i].x * gridSize + gridSize / 4, eyeY, eyeSize, 0, Math.PI * 2);
              ctx.fill();
              
              // å³çœ¼
              ctx.beginPath();
              ctx.arc(snake[i].x * gridSize + gridSize * 3/4, eyeY, eyeSize, 0, Math.PI * 2);
              ctx.fill();
            } else {
              const eyeX = snake[i].x * gridSize + gridSize / 3;
              
              // ä¸Šçœ¼
              ctx.beginPath();
              ctx.arc(eyeX, snake[i].y * gridSize + gridSize / 4, eyeSize, 0, Math.PI * 2);
              ctx.fill();
              
              // ä¸‹çœ¼
              ctx.beginPath();
              ctx.arc(eyeX + gridSize / 3, snake[i].y * gridSize + gridSize / 4, eyeSize, 0, Math.PI * 2);
              ctx.fill();
            }
            
            // æ·»åŠ é»‘è‰²ç³å­”
            ctx.fillStyle = '#000';
            
            if (direction === 'right' || direction === 'left') {
              const eyeY = snake[i].y * gridSize + gridSize / 3;
              const pupilOffset = direction === 'right' ? eyeSize/2 : -eyeSize/2;
              
              // å·¦ç³å­”
              ctx.beginPath();
              ctx.arc(snake[i].x * gridSize + gridSize / 4 + pupilOffset/2, eyeY, eyeSize/2, 0, Math.PI * 2);
              ctx.fill();
              
              // å³ç³å­”
              ctx.beginPath();
              ctx.arc(snake[i].x * gridSize + gridSize * 3/4 + pupilOffset/2, eyeY, eyeSize/2, 0, Math.PI * 2);
              ctx.fill();
            } else {
              const eyeX = snake[i].x * gridSize + gridSize / 3;
              const pupilOffset = direction === 'down' ? eyeSize/2 : -eyeSize/2;
              
              // ä¸Šç³å­”
              ctx.beginPath();
              ctx.arc(eyeX, snake[i].y * gridSize + gridSize / 4 + pupilOffset/2, eyeSize/2, 0, Math.PI * 2);
              ctx.fill();
              
              // ä¸‹ç³å­”
              ctx.beginPath();
              ctx.arc(eyeX + gridSize / 3, snake[i].y * gridSize + gridSize / 4 + pupilOffset/2, eyeSize/2, 0, Math.PI * 2);
              ctx.fill();
            }
          }
        }
        
        // ç¹ªè£½é£Ÿç‰©ï¼ˆç”œé»ï¼‰
        ctx.font = `${gridSize}px Arial`;
        ctx.textAlign = 'center';
        ctx.textBaseline = 'middle';
        ctx.fillText(currentDessert, food.x * gridSize + gridSize/2, food.y * gridSize + gridSize/2);
      }
      
      // éŠæˆ²çµæŸ
      function gameOver() {
        clearInterval(gameLoop);
        gameRunning = false;
        finalScoreDisplay.textContent = score;
        gameOverScreen.style.display = 'block';
      }
      
      // é–‹å§‹éŠæˆ²
      function startGame() {
        if (!gameRunning) {
          initGame();
          gameRunning = true;
          gamePaused = false;
          gameLoop = setInterval(gameStep, gameSpeed);
        }
      }
      
      // æš«åœéŠæˆ²
      function togglePause() {
        if (!gameRunning) return;
        
        gamePaused = !gamePaused;
        pauseBtn.textContent = gamePaused ? 'ç¹¼çºŒ' : 'æš«åœ';
      }
      
      // é‡ç½®éŠæˆ²
      function resetGame() {
        clearInterval(gameLoop);
        initGame();
        gameRunning = false;
        gamePaused = false;
        pauseBtn.textContent = 'æš«åœ';
      }
      
      // æŒ‰éˆ•äº‹ä»¶ç›£è½
      startBtn.addEventListener('click', startGame);
      pauseBtn.addEventListener('click', togglePause);
      resetBtn.addEventListener('click', resetGame);
      restartBtn.addEventListener('click', startGame);
      
      // éµç›¤æ§åˆ¶
      document.addEventListener('keydown', (e) => {
        // é˜²æ­¢ä½¿ç”¨æ–¹å‘éµæ™‚é é¢æ»¾å‹•
        if(['ArrowUp', 'ArrowDown', 'ArrowLeft', 'ArrowRight', ' '].includes(e.key)) {
          e.preventDefault();
        }
        
        // æ ¹æ“šæŒ‰éµæ›´æ”¹æ–¹å‘ï¼ˆåŒæ™‚ç¢ºä¿ä¸èƒ½ç›´æ¥180åº¦è½‰å½ï¼‰
        switch (e.key) {
          case 'ArrowUp':
            if (direction !== 'down') nextDirection = 'up';
            break;
          case 'ArrowDown':
            if (direction !== 'up') nextDirection = 'down';
            break;
          case 'ArrowLeft':
            if (direction !== 'right') nextDirection = 'left';
            break;
          case 'ArrowRight':
            if (direction !== 'left') nextDirection = 'right';
            break;
          case ' ':
            // ç©ºæ ¼éµæ§åˆ¶æš«åœ
            if (gameRunning) togglePause();
            break;
        }
      });
      
      // è§¸æ§æŒ‰éˆ•æ§åˆ¶
      upBtn.addEventListener('click', () => {
        if (direction !== 'down') nextDirection = 'up';
      });
      
      leftBtn.addEventListener('click', () => {
        if (direction !== 'right') nextDirection = 'left';
      });
      
      rightBtn.addEventListener('click', () => {
        if (direction !== 'left') nextDirection = 'right';
      });
      
      downBtn.addEventListener('click', () => {
        if (direction !== 'up') nextDirection = 'down';
      });
      
      // åˆå§‹åŒ–éŠæˆ²é¡¯ç¤º
      initGame();
    });
  </script>


</body>

</html>